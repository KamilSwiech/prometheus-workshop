global:
  resolve_timeout: 5m
  route:
    group_by: ['job']
    group_wait: 2m
    group_interval: 10m
    repeat_interval: 12h
    receiver: default
    routes:
           - match:
              severity: critical
             receiver: mattermost
           - match:
              severity: warning
             receiver: mattermost
  receivers:
  - name: default
  - name: mattermost
    slack_configs:
       - api_url: "https://talk.gigaset-devnet.pl/hooks/8imzn5o7obfs8eow174kciioxr"
         username: '{{ template "slack.default.username" . }}'
         color: '{{ if eq .Status "firing" }}danger{{ else }}good{{ end }}'
         title: '{{ template "slack.default.title" . }}'
         title_link: '{{ template "slack.default.titlelink" . }}'
         pretext: '**{{ .CommonAnnotations.summary }}**'
         text: |-
           {{- template  "slack.default.text" . -}}
         fallback: '{{ template "slack.default.fallback" . }}'
         icon_emoji: '{{ template "slack.default.iconemoji" . }}'
         icon_url: '{{ template "slack.default.iconurl" . }}'
    templates:
           - '/etc/alertmanager/configmaps/alertmanager-templates/*.tmpl'

